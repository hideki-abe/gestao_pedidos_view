<form (ngSubmit)="salvarPedido()">
  
  <div class="section-container">
    <h4 class="section-title">Dados do Pedido</h4>
    
    <div class="form-grid">

      <div class="form-group">
        <label class="form-label">Documento:</label>
        <input 
          type="text" 
          maxlength="18"
          class="form-input" 
          [(ngModel)]="documento"
          (ngModelChange)="buscarClientePorDocumento()"
          name="documento" 
          placeholder="CPF ou CNPJ">
      </div>

      <div class="form-group">
        <label class="form-label">Cliente:</label>
        <input 
          type="text" 
          class="form-input" 
          [class.input-locked]="isDocumentoLocked"
          [(ngModel)]="clienteNome" 
          name="cliente" 
          [readonly]="isDocumentoLocked"
          required
          placeholder="Nome ou Raz√£o Social">
      </div>

      <div class="form-group">
        <label class="form-label">Vendedor:</label>
        <select class="form-select" [(ngModel)]="vendedorSelecionado" name="vendedor" required>
          <option [ngValue]="null">Selecione um vendedor</option>
          <option *ngFor="let vendedor of vendedores && vendedores.length ? vendedores : []" [ngValue]="vendedor.id">
            {{ vendedor.nome }}
          </option>
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">N√∫mero do Pedido:</label>
        <input 
          type="text" 
          class="form-input" 
          [(ngModel)]="numeroPedido" 
          name="numeroPedido" 
          required>
      </div>

      <div class="form-group">
        <label class="form-label">Contato:</label>
        <input 
          type="text" 
          class="form-input" 
          [class.input-locked]="isDocumentoLocked"
          [readonly]="isDocumentoLocked"
          [(ngModel)]="contato" 
          name="contato" 
          required>
      </div>

    </div>
  </div>

  <div class="section-container">
    <h4 class="section-title">Prioridade</h4>
    <select class="form-select" [(ngModel)]="prioridade" name="prioridade">
      <option value="baixa">Baixa</option>
      <option value="normal">Normal</option>
      <option value="alta">Alta</option>
      <option value="urgente">Urgente</option>
    </select>
  </div>

  <div class="section-container">
    <h4 class="section-title">Observa√ß√µes</h4>
    <textarea 
      class="form-textarea"
      [(ngModel)]="observacoes"
      name="observacoes"
      placeholder="Digite observa√ß√µes sobre o pedido..."
      rows="4">
    </textarea>
  </div>

  <div class="section-container">
    <h4 class="section-title">Adicionar Item</h4>
    <div class="form-grid">
      <div class="form-group">
        <label class="form-label">Nome:</label>
        <select class="form-select" [(ngModel)]="itemAtual.nome" name="nome">
          @for (desc of DESCRICOES; track desc) {
            <option value="{{ desc }}">{{ desc }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">Tipo:</label>
        <select class="form-select" [(ngModel)]="itemAtual.tipo" name="itemTipo">
          @for (tipo of tipos; track tipo) {
            <option value="{{ tipo.value }}">{{ tipo.value }}</option>
          }
        </select>
      </div>

      <div class="form-group">
        <label class="form-label">Quantidade:</label>
        <input type="number" class="form-input" [(ngModel)]="itemAtual.quantidade" name="itemQuantidade" min="1">
      </div>

      <div class="form-group">
        <label class="form-label">Medida 1:</label>
        <input type="number" class="form-input" [(ngModel)]="itemAtual.medida_1" name="itemMedida1">
      </div>

      <div class="form-group">
        <label class="form-label">Medida 2:</label>
        <input type="number" class="form-input" [(ngModel)]="itemAtual.medida_2" name="itemMedida2">
      </div>

      <div class="form-group">
        <label class="form-label">Furo:</label>
        <input type="number" class="form-input" [(ngModel)]="itemAtual.furo" name="itemFuro">
      </div>
    </div>

    <button type="button" class="btn-secondary" (click)="adicionarItem()">
      Adicionar Item
    </button>
  </div>

  <div class="section-container" *ngIf="itens.length > 0">
    <h4 class="section-title">Itens Adicionados ({{ itens.length }})</h4>
    
    <div class="table-container">
      <table class="itens-table">
        <thead>
          <tr>
            <th>Descri√ß√£o</th>
            <th>Tipo</th>
            <th>Qtd</th>
            <th>Medida 1</th>
            <th>Medida 2</th>
            <th>Furo</th>
            <th>A√ß√µes</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of itens; let i = index" class="item-row">
            <td class="item-nome">{{ item.nome }}</td>
            <td class="item-tipo">{{ item.tipo }}</td>
            <td class="item-quantidade">{{ item.quantidade }}</td>
            <td class="item-medida1">{{ item.medida_1 }}</td>
            <td class="item-medida2">{{ item.medida_2 }}</td>
            <td class="item-furo">{{ item.furo }}</td>
            <td class="item-actions">
              <button 
                type="button" 
                class="btn-edit" 
                (click)="editarItem(i)" 
                title="Editar item">
                ‚úèÔ∏è
              </button>
              <button 
                type="button" 
                class="btn-remove" 
                (click)="removerItem(i)" 
                title="Remover item">
                üóëÔ∏è
              </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <button 
    type="submit"
    class="form-button"
    (click)="imprimePedido()">
    Criar Pedido
  </button>
</form>
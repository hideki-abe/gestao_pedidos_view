<form (ngSubmit)="salvarFluxo()">
  <div class="section-container">
    <div *ngIf="error" class="form-error">{{ error }}</div>
    <div *ngIf="success" class="form-success">{{ success }}</div>
    <div class="form-grid">
      <div class="form-group">
        <label class="form-label">Nome do Fluxo:</label>
        <input 
          type="text" 
          class="form-input" 
          [(ngModel)]="nome" 
          name="nome" 
          required
          placeholder="Nome do fluxo">
      </div>
      <div class="form-group">
        <label class="form-label">Descri√ß√£o:</label>
        <input 
          type="text" 
          class="form-input" 
          [(ngModel)]="descricao" 
          name="descricao" 
          required
          placeholder="Descri√ß√£o do fluxo">
      </div>
    </div>
    <div class="form-group">
      <label class="form-label">Fases do Fluxo:</label>
      <div *ngFor="let fase of fases; let i = index" class="fase-row">
        <input type="text" [(ngModel)]="fase.nome" name="faseNome{{i}}" placeholder="Nome da fase" required />
        <button type="button" (click)="removerFase(i)" class="btn-remove" style="margin-left: 8px;">üóëÔ∏è</button>
      </div>
      <button type="button" (click)="adicionarFase()" class="btn-secondary" style="margin-top: 8px;">Adicionar Fase</button>
    </div>
  </div>
  <button type="submit" class="form-button">Cadastrar Fluxo</button>
</form>

<section class="component-section" style="margin-top: 2rem;">
  <h4 class="section-title">Fluxos Cadastrados</h4>
  <div class="table-container">
    <table class="itens-table">
      <thead>
        <tr>
          <th>Nome</th>
          <th>Descri√ß√£o</th>
          <th></th>
        </tr>
      </thead>
      <tbody>
        @for (fluxo of fluxos; track fluxo.id) {
            <tr>
              <td>
                <span *ngIf="!fluxoEditando || fluxoEditando.id !== fluxo.id">{{ fluxo.nome }}</span>
                <input *ngIf="fluxoEditando && fluxoEditando.id === fluxo.id"
                       [(ngModel)]="fluxoEditando.nome"
                       class="form-input"
                       name="editNome{{fluxo.id}}" />
              </td>
              <td>
                <span *ngIf="!fluxoEditando || fluxoEditando.id !== fluxo.id">{{ fluxo.descricao }}</span>
                <input *ngIf="fluxoEditando && fluxoEditando.id === fluxo.id"
                       [(ngModel)]="fluxoEditando.descricao"
                       class="form-input"
                       name="editDescricao{{fluxo.id}}" />
              </td>
              <td class="item-actions">
                <button *ngIf="!fluxoEditando || fluxoEditando.id !== fluxo.id"
                        type="button"
                        class="btn-edit"
                        (click)="editarFluxo(fluxo)">
                  ‚úèÔ∏è
                </button>
                <button *ngIf="fluxoEditando && fluxoEditando.id === fluxo.id"
                        type="button"
                        class="btn-edit"
                        (click)="salvarEdicaoFluxo()">
                  üíæ
                </button>
                <button *ngIf="fluxoEditando && fluxoEditando.id === fluxo.id"
                        type="button"
                        class="btn-secondary"
                        (click)="cancelarEdicaoFluxo()">
                  ‚ùå
                </button>
                <button type="button"
                        class="btn-remove"
                        (click)="removerFluxo(fluxo)">
                  üóëÔ∏è
                </button>
              </td>
            </tr>
        }
      </tbody>
    </table>
  </div>
</section>